<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script src="//code.jquery.com/jquery-1.12.1.min.js"></script> -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/cytoscape/2.3.16/cytoscape.min.js"></script>  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.2.7/cytoscape.min.js"></script>
    <script src="https://cdn.rawgit.com/cpettitt/dagre/v0.7.4/dist/dagre.min.js"></script>
    <script src="https://cdn.rawgit.com/cytoscape/cytoscape.js-dagre/1.5.0/cytoscape-dagre.js"></script>
    <script type="text/javascript">
        var hiright = {{hiright|tojson}};
        var js_tags = {{tags|tojson}};
    </script>
    <script type="text/javascript" src="../static/js/result.js"></script>
    <link rel="stylesheet" href="../static/css/main.css">
    <link id="stylesheet" rel="stylesheet" href="../static/css/result.css">
    <script src="https://kit.fontawesome.com/25e48f69d0.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Caveat" rel="stylesheet">
    <title>TKB Coder</title>
</head>

<body>
    <!---chatbot -->
    <!-- <input id="cy_button" type="button" onclick="show_cy()" value="グラフを確認する">
    <div class="suggest" id="suggest">
        {%for re in result %}
            {%if re[0] == "system"%}
                <div class="system_suggest">   
                    <div class="system left">
                        <img class="icon" src="static/img/system_icon.png" alt="">
                        <div class="suggest_content">
                            <p>{{re[1]}}</p>
                        </div>
                    </div>            
                </div>
            {%else%}
                <div class="user_comment">
                    <div class="user right">
                        <div class="suggest_content" id="suggest_content">
                            <p>{{re[1]}}</p>
                        </div>
                    </div> 
                </div>
            {%endif%}
        {%endfor%}
    </div> -->
    <!-- <div id="attention_word" class="attention_word">
        >>> 選択した文章が入ります
    </div> -->
    <!-- <div class="wrapper_user_textarea">
        <textarea class="user_textarea" name="reason" cols="20" rows="5" placeholder="メッセージを入力してください" required></textarea>
    </div> -->
     <!---chatbot -->


    <!----tagの推薦----->
    
    <div class="suggest" id="suggest">
        <div class="suggest_title"><p>こちらの文章はいかがですか？</p></div>
        {%for rec in recommends %}
            <div class="suggest_data" id="suggest_data_{{rec[0]|safe}}">    
                <div class="suggest_id ">
                        <a href="#{{rec[0]|safe}}" onclick="hello(this)" id="recommend_id_{{rec[0]|safe}}">{{rec[0]}}</a>
                        <input type="button" class="apply" id="apply_{{rec[0]|safe}}" onclick="apply_recommend(this)" value="適用する" >  
                        <input type="button" class="not_apply" id="apply_{{rec[0]|safe}}" onclick="apply_recommend(this)" value="適用しない" >
                </div>
                <div class="suggest_main">
                    <p class="recommend_sentence" id="recommend_sentence_{{rec[0]|safe}}"> {{rec[1]}}</p>
                    <p class="recommend_tag" id="recommend_tag_{{rec[0]|safe}}"> {{rec[2]}}</p>
                </div>    
            </div>
        {%endfor%}
    </div>
    <!----tagの推薦----->
    <div class="box">
        <button onclick="all_tag(this)"i class="fa-solid fa-tag"><span>タグ一覧</span></button>
        <div id="tag_modal" class="tag_modal">
            <div class="tag_modal-content">
                <div class="tag_modal-header">
                  <h1>登録済みタグ一覧</h1>
                  <button onclick="hidden_all_tag(this)"class="tag_modalClose">×</button>
                </div>
                <div class="tag_modal-body">
                    {%for tag_sentence in tags%}
                        <h2>{{tag_sentence}}</h2>
                        {%for sentence in tags[tag_sentence]%}
                            <li>{{sentence}}</li>
                        {%endfor%}
                    {%endfor%}
                </div>
              </div>
        </div>
        <button onclick="check_rec_level(this)" id="rec_level"class="rec_level"><span>推薦頻度：低</span></button>
        <button onclick="page_top(this)" id="page_top" class="page_top"><span>TOP</span></button>
        <button onclick="show_howtouse(this)" id="show_howtouse" class="show_howtouse"><span>使い方</span></button>
        <div id="howtouse_modal" class="howtouse_modal">
            <div class="howtouse_modal-content">
                <div class="howtouse_modal-header">
                  <h1>TKBcoder の使い方</h1>
                  <button onclick="hidden_howtouse(this)"class="howtouse_modalClose">×</button>
                </div>
                <div class="howtouse_modal-body">
                    <h2 class="howtouse_h2">タグの入力</h2>
                    <ol type="1">
                        <li>タグを付与したいテキストの範囲をドラッグしてください</li><br>
                        <li>範囲が決定した後, <span class="shift_enter">Shift+Enterキー</span>を押してください．タグ入力画面が表示されます．</li><br>
                        <li>検索ボックスにタグを入力し，<span class="shift_enter">送信ボタンをクリック</span> or <span class="shift_enter">Shift+z</span> を押してください．タグが送信されます．</li>
                    </ol><br>
                    <h2 class="howtouse_h2">タグの取り消し</h2>
                    <ol>
                        <p>タグを送信した範囲が緑色のボタンになっています．取り消したいタグのボタンをダブルクリックしてください．</p>
                    </ol><br>
                    <h2 class="howtouse_h2">システムからの推薦</h2>
                    <ol>
                        <h3>分析者が送信したタグと同じタグが付与される可能性のある文章が，画面右にシステムから推薦されます．</h3>
                        <li>その推薦された文章に同様のタグを付与して良ければ，<span class="shift_enter">適用する</span>ボタンをクリックしてください．</li><br>
                        <li>その推薦を断る場合には<span class="shift_enter">適用しない</span>ボタンをクリックしてください．</li>
                    </ol><br>
                    <h2 class="howtouse_h2">推薦頻度の変更</h2>
                    <ol>
                        <h3>分析対象テキストによっては，システムからの推薦頻度が極端に多いor少ない場合も想定されます．</h3>
                        <li>そのため，分析者は自分で大まかな推薦頻度を調整することが可能です</li><br>
                        <li>画面上部にあるボタンを押すことで，<span class="shift_enter">「推薦頻度：少」</span><span class="shift_enter">「推薦頻度：普」</span><span class="shift_enter">「推薦頻度：高」</span>を選択できます．</li>
                    </ol><br>
                    <h2 class="howtouse_h2">登録タグの確認</h2>
                    <ol>
                        <p>分析者が登録したタグは画面上部の<span class="shift_enter">「タグ一覧」</span>より確認できます．</p>
                    </ol><br>
                </div>
              </div>
        </div>
    </div>

    <header>
        <!---icon-->
        <!-- <div class="wrapper-menu">
            <form action="/" method="GET">
                <button i class="fa-solid fa-house"><span>Home</span></button>
            </form>
            <form action="/history" method="GET">
                <button i class="fas fa-history"><span>History</span></button>
            </form>
            <form action="/result" method="GET">
                <button i class="fas fa-chart-line"><span>Analysis</span></button>
            </form> 
        </div> -->
        <!---icon-->

        <!---modalを仕込むためのもの-->
        <div class="hidden_modal_icon">
            <div class="content">
                <div class="js-modal-open kk" href="">{{t}}</div>
            </div> 
            <div class="modal js-modal">
                <div class="modal__content">
                    <div class="modal_content_p">
                        <p class="p1">タグを入力してください</p>
                        <p class="p2">＊ Shift+z で送信できます</p>
                    </div>
                    <input type="text"  list="browsers" class="input_tag_text" id="input_tag_text"  />
                    <datalist id="browsers">
                    </datalist>
                    <input type="button" class="input_tag_button" id="input_tag_button" onclick="input_tag()" value="送信">
                    </div>
                   
                </div>
            </div>
        </div>
         <!---modalを仕込むためのもの-->

        <h1>TKBCoder</h1>    
    </header>
    
        <main>
        
            <div class="wrapper-content">
                <div class="sentences">
                    <div class="file_name"><p>ファイル名：{{file_name}}</p></div>
                    {%for line in lines %}
                    <div class="wrapper-sentence">
                        <div class="sentence">
                            <!-- <span>{{line.index}}</span> -->
                            <div id="{{line.index|safe}}" class="part_sentence">{{line.sentence}}</div>
                            <!-- <p class="sentence_content" id="{{line.index|safe}}">{{line.sentence}}</p> -->
                        </div>
                        <!-- <br> -->
                    </div>             
                    {%endfor%}
                    <!-- </form> -->
                    <div class="end">
                        <form action="/download" metho="GET">
                            <button class="btn btn-border" >ログファイルのダウンロード</button>
                        </form>
                        <form action="/" metho="GET">
                            <button class="btn2 btn-border" onclick="end()">データを消して戻る</button>
                        </form>
                    </div>
                </div> 
                
            </div>
            <!-- <textarea id="reason" class="textarea" name="reason" cols="50" rows="10" placeholder="メッセージを入力してください" required></textarea>
            <input type="button" id="submit" class="js-close button-close" onclick="get_message()" value="送信"> -->
        </main>
    
</body>
</html>

